---
title: "Map"
author: "Batool Almarzouq"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Libraries

```{r}
library(leaflet)
library(tidyverse)
library(here)
library(janitor)
```

## Import the data

```{r}
data <- read_delim(here("data","cop.tsv"), col_names = TRUE, skip = 1) 

data <- data %>% 
  clean_names()

glimpse(data)
```

## Extract only CoPs

```{r}
# clean the data and extract CoPs
all_cop <- data %>% 
  mutate(kind_of_topics = str_to_lower(kind_of_topics)) %>% 
  mutate(region_served_specify_or_all = str_to_lower(region_served_specify_or_all)) %>% 
  filter(str_detect(kind_of_topics, "community"))

# Extract the CoPs which serves all regions
all_regions_cop <- all_cop %>% 
  filter(str_detect(region_served_specify_or_all,"all"))
```

## Build a map

```{r}

regionals_cop <- all_cop %>% 
  filter(!grepl("all", region_served_specify_or_all))

```



